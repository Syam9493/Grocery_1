import{u as N,j as e,L as b,r as p,d as k,f as w,s as j,k as y,l as A,n as C,o as R,C as S,p as T}from"./index-DhnlV0K8.js";import{u as D,B as z,a as B}from"./ProductApiSlice-DVHoBTZd.js";import{u as _}from"./whishListSlice-qUN5bicp.js";import"./vendor-DJG_os-6.js";const G=({product:a,wishListItems:r})=>{var l,i;const{handleAddToWishlist:h,handleRemoveFromWishlist:c}=D(),s=(((l=r==null?void 0:r.wishList)==null?void 0:l.products)||[]).some(m=>m.productID===a._id),t=N(),o=async m=>{s?c(m._id):h(m)},d=()=>{t(`/productDetailsPage/${a._id}`)};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"w-80 md:w-56 lg:w-52 h-5xl bg-white rounded-xl shadow-xl p-3",children:[e.jsxs("div",{className:"flex flex-row justify-between",children:[e.jsx("p",{className:"bg-green-700 px-3 py-1.5 font-semibold text-md/1 text-white text-center rounded-r-full",children:"25% off"}),e.jsx("div",{className:"bg-gray-100  p-2 shadow-2xl rounded-full",children:e.jsx("button",{className:`size-6 flex items-center justify-center ${s?"text-red-500":"text-gray-400 hover:text-red-500"}`,onClick:()=>o(a),children:e.jsx(z,{})})})]}),e.jsx(b,{to:"/productDetailsPage/"+a._id,children:e.jsx("div",{className:"w-full h-48 flex items-center justify-center p-2",children:e.jsx("img",{src:((i=a.image)==null?void 0:i[0])||"/Fruits/Apple.jpeg",alt:a.name,className:"w-full h-full object-contain"})})}),e.jsxs("div",{className:"mt-6 flex flex-row justify-between",children:[e.jsx(b,{to:"/productDetailsPage/"+a._id,children:e.jsx("h1",{className:"font-sans font-bold text-[1.1rem] text-md/1 text-green-700",children:a.category||"Fresh Product"})}),e.jsxs("h3",{children:["⭐ ",e.jsxs("span",{className:"font-bold",children:[" ",a.rating||5]})]})]}),e.jsx("div",{children:e.jsx("h2",{className:"mt-0.5 font-sans font-semibold text-[1.1rem] font-stretch-normal text-start",children:e.jsx(b,{to:"/productDetailsPage/"+a._id,children:a.name})})}),e.jsx("div",{children:e.jsx("p",{className:"mt-4 text-sm/1 text-gray-400",children:a.weight||"500g"})}),e.jsxs("div",{className:"mt-5 flex flex-row justify-between",children:[e.jsxs("h3",{className:"font-sans text-base font-semibold",children:["₹",a.price||"11.75"]}),e.jsxs("button",{className:"bg-green-200 rounded-2xl font-sans font-semibold text-[1rem] text-green-700 px-2 py-1",onClick:d,children:[e.jsx("span",{className:"mr-1",children:"👜"}),"Add"]})]})]},a._id)})};p.createContext();const v=p.createContext(),L=[{id:1,type:"rating",stars:"⭐⭐⭐⭐⭐",value:"5"},{id:2,type:"rating",stars:"⭐⭐⭐⭐⭐",value:"4"},{id:3,type:"rating",stars:"⭐⭐⭐⭐⭐",value:"3"},{id:4,type:"rating",stars:"⭐⭐⭐⭐⭐",value:"2"},{id:5,type:"rating",stars:"⭐⭐⭐⭐⭐",value:"1"}],H=()=>{const{dispatch:a,removeCheckItem:r,setCheckItems:h,checkItems:c}=p.useContext(v),x=(s,t)=>{const o=c.some(d=>d.type==="rating"&&d.value===t);a(o?r({type:s,value:t}):h({type:s,value:t}))};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-col items-start",children:[e.jsx("h1",{className:"font-sans text-[20px] font-bold",children:"Review"}),L.map(s=>e.jsxs("label",{className:"inline-flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",className:"accent-green-700 size-4",value:`${s.type}, ${s.value}`,checked:c.some(t=>t.type===s.type&&t.value===s.value),onChange:()=>x(s.type,s.value)}),e.jsx("p",{children:s.stars}),e.jsxs("p",{children:[s.value," Star"]})]},s.id))]}),e.jsx("div",{className:"mt-7 border-b border-gray-400"})]})},W=()=>{const a=[{id:1,type:"brand",value:"Fresh Harvest"},{id:2,type:"brand",value:"Nature's Best"},{id:3,type:"brand",value:"Good Grains"},{id:4,type:"brand",value:"Farm Fresh"},{id:5,type:"brand",value:"Green Grocer"}],{dispatch:r,removeCheckItem:h,setCheckItems:c,checkItems:x}=p.useContext(v),s=(t,o)=>{const d=x.some(l=>l.type===t&&l.value===o);r(d?h({type:t,value:o}):c({type:t,value:o}))};return e.jsxs(e.Fragment,{children:[e.jsxs("form",{className:"flex flex-col items-start gap-4 overflow-auto",children:[e.jsx("h1",{className:"font-sans text-[20px] font-bold",children:"Brand"}),a.map(t=>e.jsxs("label",{htmlFor:`brand-${t.id}`,className:"inline-flex items-center gap-2",children:[e.jsx("input",{id:`brand-${t.id}`,type:"checkbox",className:"accent-green-700 size-4",checked:x.some(o=>o.type===t.type&&o.value===t.value),onChange:()=>s(t.type,t.value)}),e.jsx("p",{className:"font-sans text-base font-semibold",children:t.value})]},t.id))]}),e.jsx("div",{className:"mt-7 border-b border-gray-400"})]})},E=[{id:1,type:"Product Type",value:"Packaged Goods"},{id:2,type:"Product Type",value:"Fresh Product"},{id:3,type:"Product Type",value:"Frozen Foods"}],Q=()=>{const{dispatch:a,removeCheckItem:r,setCheckItems:h,checkItems:c}=p.useContext(v),x=(s,t)=>{const o=c.some(d=>d.type==="Product Type"&&d.value===t);a(o?r({type:s,value:t}):h({type:s,value:t}))};return e.jsxs(e.Fragment,{children:[e.jsxs("form",{className:"flex flex-col justify-center items-start gap-4 overflow-auto",children:[e.jsx("h1",{className:"font-sans text-[20px] font-bold",children:"Product Type"}),E.map(s=>e.jsxs("label",{htmlFor:`type-${s.id}`,className:"inline-flex items-center gap-2",children:[e.jsx("input",{id:`type-${s.id}`,type:"checkbox",className:"accent-green-700 size-4",value:`${s.type}, ${s.value}`,checked:c.some(t=>t.type===s.type&&t.value===s.value),onChange:()=>x(s.type,s.value)}),e.jsx("p",{className:"font-sans text-base font-semibold",children:s.value})]},s.id))]}),e.jsx("div",{className:"mt-7 border-b border-gray-400"})]})},U=[{id:1,type:"Availability",value:"In Stock"},{id:2,type:"Availability",value:"Out of Stock"}],O=()=>{const{dispatch:a,removeCheckItem:r,setCheckItems:h,checkItems:c}=p.useContext(v),x=(s,t)=>{const o=c.some(d=>d.type===s&&d.value===t);a(o?r({type:s,value:t}):h({type:s,value:t}))};return e.jsxs(e.Fragment,{children:[e.jsxs("form",{className:"flex flex-col items-start gap-4 overflow-auto",children:[e.jsx("h1",{className:"font-sans text-[20px] font-bold",children:"Availability"}),U.map(s=>e.jsxs("label",{htmlFor:`avail-${s.id}`,className:"inline-flex items-center gap-2",children:[e.jsx("input",{id:`avail-${s.id}`,type:"checkbox",className:"accent-green-700 size-4",value:`${s.type}, ${s.value}`,checked:c.some(t=>t.type===s.type&&t.value===s.value),onChange:()=>x(s.type,s.value)}),e.jsx("p",{className:"font-sans text-base font-semibold",children:s.value})]},s.id))]}),e.jsx("div",{className:"mt-7 border-b border-gray-400"})]})},q=()=>{const a=[{type:"category",value:"vegetables"},{type:"category",value:"Fruits"},{type:"category",value:"Beverages"},{type:"category",value:"milk & eggs"},{type:"category",value:"cleaning items"},{type:"category",value:"Dry Fruits"},{type:"category",value:"Bakery Items"},{type:"category",value:"Rice Items"},{type:"category",value:"Oils"}],r=k(),h=w(l=>l.checkItems),{checkItems:c}=h;p.useEffect(()=>{!c.some(i=>i.type==="price")&&c.price!==0&&(t(0),o.current=0)},[c]);const x=(l,i)=>{const m=c.some(f=>f.type===l&&f.value===i);r(m?y({type:l,value:i}):j({type:l,value:i}))},[s,t]=p.useState(0),o=p.useRef(),d=l=>{const i=Number(l.target.value);t(i),o.current=i;const m=c.find(f=>f.type==="price");i===0?m&&r(y(m)):m?(r(y(m)),r(j({type:"price",value:i}))):r(j({type:"price",value:i}))};return e.jsx(v.Provider,{value:{dispatch:r,removeCheckItem:y,setCheckItems:j,checkItems:c},children:e.jsxs("aside",{className:"w-64 p-4",children:[e.jsx("h3",{className:"font-sans text-[25px] font-bold mb-2 border-b-4 border-gray-400",children:"Filter Options"}),e.jsx("h1",{className:"font-sans text-[20px] font-bold",children:"Category"}),e.jsx("form",{className:"h-60 m-4 flex flex-col items-start gap-4 overflow-y-auto",children:a.map(l=>e.jsxs("label",{className:"inline-flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",className:"accent-green-700 size-4",value:`${l.type}, ${l.value}`,checked:c.some(i=>i.type===l.type&&i.value===l.value),onChange:()=>x(l.type,l.value)}),e.jsx("p",{className:"font-sans text-base font-semibold",children:l.value})]},l.type))}),e.jsx("div",{className:"mb-4 border-b border-gray-400"}),e.jsx("div",{className:"mb-4 border-b border-gray-400",children:e.jsxs("div",{className:"mb-3",children:[e.jsx("h4",{className:"font-medium mb-1",children:"Price"}),e.jsx("input",{type:"range",min:0,max:125,step:5,className:"w-full accent-green-700",value:s,onChange:d}),e.jsxs("div",{className:"font-semibold text-2xl mt-1 text-gray-500",children:["₹",s]})]})}),e.jsx(H,{}),e.jsx(W,{}),e.jsx(Q,{}),e.jsx(O,{})]})})},J=()=>new URLSearchParams(C().search),Y=()=>{const[a]=A(),r=a.get("keyword")||"",h=C(),c=k(),x=w(n=>n.checkItems),s=x.checkItems,{userID:t}=R(),{data:o}=_(t),d=(n,u)=>{c(y({type:n,value:u}))},l=()=>{c(T([]))};p.useEffect(()=>{window.scrollTo(0,0)},[h]);const i=J(),m=N(),f=Number(i.get("page"))||1,{data:g,isLoading:P}=B({keyword:r,categories:s,page:f}),F=(g==null?void 0:g.data)||[],I=n=>{const u=new URLSearchParams;r&&u.set("keyword",r),s.length>0&&s.forEach($=>u.append("categories",$)),u.set("page",n),m(`/shop?${u.toString()}`)};return e.jsx(e.Fragment,{children:P?e.jsx("div",{className:"flex justify-center m-20",children:e.jsx(S,{size:100})}):e.jsx("div",{className:"overflow-x-auto m-6",children:e.jsxs("div",{className:"min-w-full grid grid-flow-col bg-white mt-1 mb-4 p-6",children:[e.jsx("div",{className:"hidden md:grid md:grid-cols-1 md:p-7",children:e.jsx("div",{className:"max-w-full flex flex-col",children:e.jsx(q,{})})}),e.jsxs("div",{className:"m-7 flex flex-col justify-center",children:[e.jsx("div",{className:"m-10",children:e.jsxs("div",{className:"hidden md:grid md:grid-cols-5 md:items-center md:justify-center md:gap-3",children:[e.jsx("p",{className:"font-sans font-bold text-xl",children:"Active Filteres:"}),x.checkItems&&x.checkItems.map((n,u)=>e.jsxs("button",{className:"sm:w-full flex items-center justify-center gap-3 bg-yellow-300 text-black font-light font-stretch-100% border-gray-50 rounded-4xl py-2",onClick:()=>d(n.type,n.value),children:[`${n.type==="price"?`${n.type} : ${n.value}`:n.type==="rating"?`${n.value} Stars`:n.value}`,e.jsx("span",{children:"x"})]},u)),e.jsx("button",{className:"ml-7 font-sans font-semibold text-[1.1em] text-green-700 border-b-2 w-20",onClick:l,children:"Clear All"})]})}),e.jsx("div",{className:"grid grid-cols-1 place-items-center md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-5",children:F.map(n=>e.jsx(G,{product:n,wishListItems:o},n._id))}),e.jsx("div",{className:"flex items-center justify-center gap-3 mt-20",children:[...Array(g==null?void 0:g.pages).keys()].map(n=>e.jsx("button",{onClick:()=>I(n+1),className:`px-4 py-2 rounded-md border text-sm font-medium transition 
        ${n+1===g.page?"bg-green-700 text-white border-green-700":"bg-white text-gray-700 border-gray-300 hover:bg-gray-100"}`,children:n+1},n+1))})]})]})})})};export{Y as default};
