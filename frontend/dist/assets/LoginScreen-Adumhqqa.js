import{j as e,r as l,u as V,d as F,f as H,L as N,h as M,y as j}from"./index-DhnlV0K8.js";import{u as T}from"./userSlice-DU5PtioV.js";import"./vendor-DJG_os-6.js";const q=({children:n})=>e.jsx("div",{className:"flex min-h-full flex-col justify-center px-6 py-8 lg:px-8",children:n}),$=()=>{const[n,b]=l.useState(""),[i,v]=l.useState(""),[p,S]=l.useState(""),[u,w]=l.useState(!1),d=8,x=20,[o,y]=l.useState({tooShort:!1,tooLong:!1,noSpecialChar:!1,noNumber:!1,noUpper:!1,noLower:!1,isValid:!1}),h=V(),L=F(),C=H(t=>{var s;return(s=t.userInfo)==null?void 0:s.userInfo}),E=(()=>{try{const t=localStorage.getItem("persist:root");if(t){const s=JSON.parse(t);if(s.userInfo)return JSON.parse(s.userInfo)}return JSON.parse(localStorage.getItem("userInfo"))||null}catch{return null}})(),g=C||E,f=g==null?void 0:g.name;console.log(f),l.useEffect(()=>{f&&h("/")},[f,h]);const U=t=>{const s=t.target.value;b(s),S(/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(s)?"":"Invalid email format")},k=t=>{const s=/[!@#$%^&*()_+\-=[\]{};':"\\|,.<>/?`~]/,a=/\d/.test(t),r=/[A-Z]/.test(t),m=/[a-z]/.test(t);return{tooShort:t.length>0&&t.length<d,tooLong:t.length>x,noSpecialChar:t.length>0&&!s.test(t),noNumber:t.length>0&&!a,noUpper:t.length>0&&!r,noLower:t.length>0&&!m,isValid:t.length>=d&&t.length<=x&&s.test(t)&&a&&r&&m}},I=t=>{const s=t.target.value;v(s),y(k(s))},[P,{isLoading:c}]=T(),R=async t=>{var s,a;if(t.preventDefault(),!!o.isValid)try{const r=await P({email:n.trim(),password:i}).unwrap();L(M(r)),j.success("Login Success",{position:"top-right",theme:"colored"}),h("/")}catch(r){const m=((a=(s=r.response)==null?void 0:s.data)==null?void 0:a.message)||"Login failed";j.error(m,{position:"top-right",theme:"colored"})}};return e.jsx(e.Fragment,{children:c?e.jsx("div",{children:"Loading..."}):e.jsxs(q,{children:[e.jsx("div",{className:"sm:mx-auto sm:w-full sm:max-w-sm",children:e.jsx("h2",{className:"mt-8 text-center text-2xl/9 font-bold tracking-tight text-green-700",children:"Sign in to your account"})}),e.jsxs("div",{className:"mt-8 sm:mx-auto sm:w-full sm:max-w-sm",children:[e.jsxs("form",{className:"space-y-6",onSubmit:R,children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm/6 font-medium text-gray-900",children:"Email address"}),e.jsxs("div",{className:"mt-2",children:[e.jsx("input",{type:"email",value:n,required:!0,autoComplete:"username",className:"block w-full rounded-md bg-white px-3 py-1.5 text-base text-gray-900 outline-1 -outline-offset-1 outline-green-500 placeholder:text-gray-400 focus:outline-2 focus:-outline-offset-2 focus:outline-green-600 sm:text-sm/6",onChange:U}),p&&e.jsx("p",{className:"text-red-800 text-sm mt-1",children:p})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("label",{className:"block text-sm/6 font-medium text-gray-900",children:"Password"}),e.jsx("button",{type:"button",className:"text-sm text-green-600 hover:text-green-500",onClick:()=>w(!u),children:u?"Hide":"Show"})]}),e.jsxs("div",{className:"mt-2",children:[e.jsx("input",{type:u?"text":"password",value:i,required:!0,autoComplete:"current-password",className:"block w-full rounded-md bg-white px-3 py-1.5 text-base text-gray-900 outline-1 -outline-offset-1 outline-green-500 placeholder:text-gray-400 focus:outline-2 focus:-outline-offset-2 focus:outline-green-600 sm:text-sm/6",onChange:I}),e.jsxs("div",{className:"mt-2 text-xs",children:[o.tooShort&&e.jsxs("p",{className:"text-red-600",children:["• Too short (min ",d," chars)"]}),o.tooLong&&e.jsxs("p",{className:"text-red-600",children:["• Too long (max ",x," chars)"]}),o.noSpecialChar&&e.jsx("p",{className:"text-orange-600",children:"• Needs special character"}),o.noNumber&&e.jsx("p",{className:"text-orange-600",children:"• Needs number"}),o.noUpper&&e.jsx("p",{className:"text-orange-600",children:"• Needs uppercase letter"}),o.noLower&&e.jsx("p",{className:"text-orange-600",children:"• Needs lowercase letter"}),o.isValid&&e.jsx("p",{className:"text-green-600",children:"✓ Password meets all requirements"})]})]})]}),e.jsx("div",{children:e.jsx("button",{type:"submit",disabled:!n||!i||c||!o.isValid,className:`flex w-full justify-center rounded-md px-3 py-1.5 text-sm/6 font-semibold text-white shadow-xs focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-green-600 ${!n||!i||c||!o.isValid?"bg-gray-400 cursor-not-allowed":"bg-green-700 hover:bg-green-500"}`,children:c?"Signing in...":"Sign in"})})]}),e.jsxs("p",{className:"mt-8 ml-2 text-left text-md/3 text-gray-500",children:["New Customer?",e.jsx(N,{to:"/signUp",className:"font-semibold text-green-700 hover:text-green-500 ml-1",children:"SignUp here"})]}),e.jsx("div",{className:"mt-2 text-md ml-2",children:e.jsx(N,{to:"/Forgot",className:"font-semibold text-green-600 hover:text-green-500",children:"Forgot password?"})})]})]})})};export{$ as default};
