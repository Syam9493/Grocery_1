import{r as d,h as W,u as q,i as z,j as e,F as J,v as B,y as u,w as H,x as M,C as f,p as Q,q as G}from"./index-DzasKl2O.js";import{I as K}from"./index-SY6ChBRY.js";import{b as V}from"./ProductApiSlice-GgFvMR03.js";import{u as X}from"./cartApi-ZyPLVcRe.js";import"./vendor-DJG_os-6.js";const Y=()=>{var w,N,v,C,I,P,k,S,A;const{product:t}=d.useContext(p),[s,o]=d.useState(0),r=W(),n=q(),[c]=X(),i=z(l=>{var a;return(a=l.userInfo)==null?void 0:a.user}),x=(()=>{var l;try{const a=localStorage.getItem("persist:root");if(a){const m=JSON.parse(a);if(m.userInfo)return JSON.parse(m.userInfo).user}return((l=JSON.parse(localStorage.getItem("userInfo")))==null?void 0:l.user)||null}catch{return null}})(),g=i||x,h=g==null?void 0:g.id;if(!t)return e.jsx("div",{className:"p-4 text-center",children:"Loading product details..."});if(!t.data||!t.data.image||!Array.isArray(t.data.image))return e.jsx("div",{className:"p-4 text-center text-red-500",children:"Invalid product data"});const b=async l=>{var a;if(!l){u.error("Invalid product data");return}if(!h){u.error("Please log in to add items to your cart."),n("/login");return}try{const m=await c({userID:h,product:l}).unwrap();console.log(m),r(H(l)),u.success("Product added to cart!",{autoClose:500,position:"top-right",theme:"colored"})}catch(m){console.error("Cart Update Failed:",m),u.error(((a=m.data)==null?void 0:a.message)||"Failed to add product to cart.")}},j=()=>{if(!t.data){u.error("Invalid product data");return}r(M(t.data)),u.success("Product added to wishlist!",{position:"top-right",autoClose:1e3,theme:"colored"}),setTimeout(()=>n("/whishList"),2e3)},T=()=>{s<t.data.image.length-1&&o(s+1)},$=()=>{s>0&&o(s-1)},F=((N=(w=t.data)==null?void 0:w.image)==null?void 0:N[s])||"",L=((v=t.data)==null?void 0:v.category)||"",R=((C=t.data)==null?void 0:C.name)||"",U=((I=t.data)==null?void 0:I.rating)||0,D=((P=t.data)==null?void 0:P.price)||0,E=((k=t.data)==null?void 0:k.description)||"",y=((S=t.data)==null?void 0:S.Availablility)||"Out of Stock",O=((A=t.data)==null?void 0:A.weight)||"";return e.jsxs("div",{className:"p-4 w-full max-w-screen-xl mx-auto flex flex-col lg:flex-row gap-6",children:[e.jsxs("div",{className:"w-full lg:w-1/2",children:[e.jsx("div",{className:"w-full max-w-[320px] sm:max-w-[360px] md:max-w-[420px] lg:max-w-[500px] bg-white rounded-2xl shadow-md p-4 mx-auto",children:e.jsxs("div",{className:"relative w-full md:h-[400px] aspect-square overflow-hidden rounded-xl",children:[e.jsx("button",{className:`absolute left-2 top-1/2 -translate-y-1/2 ${s===0?"bg-gray-200":"bg-yellow-500"} text-white hover:bg-white hover:text-yellow-500 rounded-full p-2 z-10`,onClick:$,disabled:s===0,children:e.jsx(J,{})}),e.jsx("div",{className:"p-10",children:e.jsx("img",{src:F,alt:`Product ${s}`,className:"bg-white backdrop-blur-3xl w-full h-full object-contain"})}),e.jsx("button",{className:`absolute right-2 top-1/2 -translate-y-1/2 ${s===t.data.image.length-1?"bg-gray-200":"bg-green-700"} text-white hover:bg-white hover:text-green-700 rounded-full p-2 z-10`,onClick:T,disabled:s===t.data.image.length-1,children:e.jsx(B,{})})]})}),e.jsx("div",{className:"flex flex-wrap justify-center gap-2 mt-4",children:t.data.image.map((l,a)=>e.jsx("img",{src:l,onClick:()=>o(a),className:`w-20 h-16 sm:w-24 sm:h-20 object-cover rounded-lg cursor-pointer border-2 ${s===a?"border-green-500 border-4":"border-gray-300"}`,alt:`Thumbnail ${a}`},a))})]}),e.jsx("div",{className:"w-full lg:w-1/2",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("h2",{className:"text-sm font-semibold text-gray-500",children:L}),e.jsxs("div",{className:"flex flex-row gap-2.5",children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-800",children:R}),e.jsx("h1",{className:`border ${y==="In Stock"?"border-green-700 bg-green-100 text-green-700":"border-red-700 bg-red-300 text-red-700"} text-sm font-semibold rounded-3xl px-6 py-1.5`,children:y})]}),e.jsxs("p",{className:"text-lg",children:["⭐⭐⭐⭐⭐ ",e.jsx("span",{children:U})]}),e.jsxs("p",{className:"text-xl font-semibold text-green-700",children:["₹ ",D]}),e.jsx("p",{className:"text-gray-700",children:E}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Weight"}),e.jsx("div",{className:"flex gap-2 flex-wrap",children:e.jsx("button",{className:"px-4 py-1 border border-gray-300 rounded-md hover:bg-green-100",children:O})})]}),e.jsxs("div",{className:"flex flex-wrap gap-4 items-center mt-4",children:[e.jsx("button",{className:"bg-green-700 text-white px-6 py-2 rounded-full hover:bg-green-800",onClick:()=>b(t.data),children:"Add To Cart"}),e.jsx("button",{className:"bg-yellow-400 px-6 py-2 rounded-full hover:bg-yellow-300",children:"Buy Now"}),e.jsx("button",{className:"bg-gray-100 text-gray-700 p-3 rounded-full hover:bg-red-100",onClick:j,children:e.jsx(K,{})})]})]})})]})},Z=()=>{var o;const{product:t,loading:s}=d.useContext(p);return e.jsx("div",{children:(o=t==null?void 0:t.data)==null?void 0:o.description})},_=()=>{var r,n,c,i,x,g;const{product:t,loading:s}=d.useContext(p),o={Name:((r=t==null?void 0:t.data)==null?void 0:r.name)||"-",Category:((n=t==null?void 0:t.data)==null?void 0:n.category)||"-",Weight:((c=t==null?void 0:t.data)==null?void 0:c.weight)||"-",Price:(i=t==null?void 0:t.data)!=null&&i.price?`₹${t.data.price}`:"-",Rating:((x=t==null?void 0:t.data)==null?void 0:x.rating)||"-",Quantity:((g=t==null?void 0:t.data)==null?void 0:g.quantity)||"-"};return e.jsx(e.Fragment,{children:s?e.jsx(f,{}):e.jsx("div",{className:"overflow-x-auto rounded-lg shadow-md m-4 sm:m-6",children:e.jsxs("table",{className:"min-w-full table-auto border-collapse text-left text-sm sm:text-base",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-yellow-400",children:[e.jsx("th",{className:"px-4 py-3 sm:px-10 sm:py-3 font-bold text-base sm:text-xl",children:"Attribute"}),e.jsx("th",{className:"px-4 py-3 sm:px-10 sm:py-3 font-bold text-base sm:text-xl",children:"Details"})]})}),e.jsx("tbody",{children:Object.entries(o).map(([h,b],j)=>e.jsxs("tr",{className:j%2===0?"bg-white":"bg-gray-100",children:[e.jsx("td",{className:"px-4 py-3 sm:px-6 sm:py-4 break-words max-w-xs",children:h}),e.jsx("td",{className:"px-4 py-3 sm:px-6 sm:py-4 break-words max-w-xs",children:b})]},h))})]})})})},ee=()=>{const{product:t,loading:s}=d.useContext(p);return e.jsx(e.Fragment,{children:s?e.jsx(f,{}):e.jsx("div",{children:t.data.rating})})},p=d.createContext(),le=()=>{const t=Q(),o=G().id,[r,n]=d.useState("description"),{data:c,isLoading:i,isError:x}=V(o);return console.log(c),console.log(i),console.log(x),d.useEffect(()=>{window.scrollTo(0,0)},[t]),i?e.jsx("div",{className:"flex justify-center m-20",children:e.jsx(f,{size:100})}):x?e.jsx("div",{children:"Unable to fetch data."}):e.jsx(e.Fragment,{children:e.jsx(p.Provider,{value:{product:c,isLoading:i},children:e.jsx("div",{className:"overflow-x-auto m-6 bg-gray-50/50",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8 grid grid-cols-1 md:grid-rows-2 gap-8",children:[e.jsx("div",{children:e.jsx(Y,{})}),e.jsxs("div",{className:"w-full",children:[e.jsxs("div",{className:"flex flex-wrap justify-center gap-4 sm:gap-6 mb-6",children:[e.jsx("button",{className:`font-semibold text-base sm:text-lg text-gray-500 px-3 py-2 border-b-2 transition duration-200 ${r==="description"?"border-green-700 text-green-700":"border-transparent"}`,onClick:()=>n("description"),children:"Description"}),e.jsx("button",{className:`font-semibold text-base sm:text-lg text-gray-500 px-3 py-2 border-b-2 transition duration-200 ${r==="additional"?"border-green-700 text-green-700":"border-transparent"}`,onClick:()=>n("additional"),children:"Additional Info"}),e.jsx("button",{className:`font-semibold text-base sm:text-lg text-gray-500 px-3 py-2 border-b-2 transition duration-200 ${r==="rating"?"border-green-700 text-green-700":"border-transparent"}`,onClick:()=>n("rating"),children:"Rating"})]}),e.jsxs("div",{className:"mt-4",children:[r==="description"&&e.jsx(Z,{}),r==="additional"&&e.jsx(_,{}),r==="rating"&&e.jsx(ee,{})]})]})]})})})})};export{p as ProductContext,le as default};
