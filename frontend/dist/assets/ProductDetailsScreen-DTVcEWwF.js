import{r as l,o as T,d as G,u as H,j as e,q as O,t as _,y as b,v as M,C as j,n as J,w as K}from"./index-DhnlV0K8.js";import{u as V,B as X,c as Y}from"./ProductApiSlice-DVHoBTZd.js";import{u as Z}from"./whishListSlice-qUN5bicp.js";import{u as ee}from"./cartApi-Dqz5AsWL.js";import"./vendor-DJG_os-6.js";const te=({wishListItems:t})=>{var w,v,N,C,A,k,P,$,F,I;const{product:s}=l.useContext(h),[a,r]=l.useState(0),{userID:i}=T(),{handleAddToWishlist:c,handleRemoveFromWishlist:x}=V(),d=G(),m=H(),[g]=ee(),u=(((w=t==null?void 0:t.wishList)==null?void 0:w.products)||[]).some(n=>n.productID===s.data._id);if(!s)return e.jsx("div",{className:"p-4 text-center",children:"Loading product details..."});if(!s.data||!s.data.image||!Array.isArray(s.data.image))return e.jsx("div",{className:"p-4 text-center text-red-500",children:"Invalid product data"});const D=async n=>{var o;if(!n){b.error("Invalid product data");return}if(!i){b.error("Please log in to add items to your cart."),m("/login");return}try{const p=await g({userID:i,product:n}).unwrap();console.log(p),d(M(n)),b.success("Product added to cart!",{autoClose:500,position:"top-right",theme:"colored"})}catch(p){console.error("Cart Update Failed:",p),b.error(((o=p.data)==null?void 0:o.message)||"Failed to add product to cart.")}},W=async n=>{u?x(n._id):c(n)},U=()=>{a<s.data.image.length-1&&r(a+1)},R=()=>{a>0&&r(a-1)},S=((N=(v=s.data)==null?void 0:v.image)==null?void 0:N[a])||"",L=((C=s.data)==null?void 0:C.category)||"",z=((A=s.data)==null?void 0:A.name)||"",B=((k=s.data)==null?void 0:k.rating)||0,E=((P=s.data)==null?void 0:P.price)||0,q=(($=s.data)==null?void 0:$.description)||"",y=((F=s.data)==null?void 0:F.Availability)||"Out of Stock",Q=((I=s.data)==null?void 0:I.weight)||"";return e.jsxs("div",{className:"p-4 w-full max-w-screen-xl mx-auto flex flex-col lg:flex-row gap-6",children:[e.jsxs("div",{className:"w-full lg:w-1/2",children:[e.jsx("div",{className:"w-full max-w-[320px] sm:max-w-[360px] md:max-w-[420px] lg:max-w-[500px] bg-white rounded-2xl shadow-md p-4 mx-auto",children:e.jsxs("div",{className:"relative w-full md:h-[400px] aspect-square overflow-hidden rounded-xl",children:[e.jsx("button",{className:`absolute left-2 top-1/2 -translate-y-1/2 ${a===0?"bg-gray-200":"bg-yellow-500"} text-white hover:bg-white hover:text-yellow-500 rounded-full p-2 z-10`,onClick:R,disabled:a===0,children:e.jsx(O,{})}),e.jsx("div",{className:"p-10",children:e.jsx("img",{src:S,alt:`Product ${a}`,className:"bg-white backdrop-blur-3xl w-full h-full object-contain"})}),e.jsx("button",{className:`absolute right-2 top-1/2 -translate-y-1/2 ${a===s.data.image.length-1?"bg-gray-200":"bg-green-700"} text-white hover:bg-white hover:text-green-700 rounded-full p-2 z-10`,onClick:U,disabled:a===s.data.image.length-1,children:e.jsx(_,{})})]})}),e.jsx("div",{className:"flex flex-wrap justify-center gap-2 mt-4",children:s.data.image.map((n,o)=>e.jsx("img",{src:n,onClick:()=>r(o),className:`w-20 h-16 sm:w-24 sm:h-20 object-cover rounded-lg cursor-pointer border-2 ${a===o?"border-green-500 border-4":"border-gray-300"}`,alt:`Thumbnail ${o}`},o))})]}),e.jsx("div",{className:"w-full lg:w-1/2",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("h2",{className:"text-sm font-semibold text-gray-500",children:L}),e.jsxs("div",{className:"flex flex-row gap-2.5",children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-800",children:z}),e.jsx("h1",{className:`border ${y==="In Stock"?"border-green-700 bg-green-100 text-green-700":"border-red-700 bg-red-300 text-red-700"} text-sm font-semibold rounded-3xl px-6 py-1.5`,children:y})]}),e.jsxs("p",{className:"text-lg",children:["⭐⭐⭐⭐⭐ ",e.jsx("span",{children:B})]}),e.jsxs("p",{className:"text-xl font-semibold text-green-700",children:["₹ ",E]}),e.jsx("p",{className:"text-gray-700",children:q}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Weight"}),e.jsx("div",{className:"flex gap-2 flex-wrap",children:e.jsx("button",{className:"px-4 py-1 border border-gray-300 rounded-md hover:bg-green-100",children:Q})})]}),e.jsxs("div",{className:"flex flex-wrap gap-4 items-center mt-4",children:[e.jsx("button",{className:"bg-green-700 text-white px-6 py-2 rounded-full hover:bg-green-800",onClick:()=>D(s.data),children:"Add To Cart"}),e.jsx("button",{className:"bg-yellow-400 px-6 py-2 rounded-full hover:bg-yellow-300",children:"Buy Now"}),e.jsx("button",{className:`flex items-center justify-center size-6 ${u?"text-red-500":"text-gray-400 hover:text-red-500"}`,onClick:()=>W(s.data),children:e.jsx(X,{})})]})]})})]})},se=()=>{var a;const{product:t,loading:s}=l.useContext(h);return e.jsx("div",{children:(a=t==null?void 0:t.data)==null?void 0:a.description})},ae=()=>{var r,i,c,x,d,m;const{product:t,loading:s}=l.useContext(h),a={Name:((r=t==null?void 0:t.data)==null?void 0:r.name)||"-",Category:((i=t==null?void 0:t.data)==null?void 0:i.category)||"-",Weight:((c=t==null?void 0:t.data)==null?void 0:c.weight)||"-",Price:(x=t==null?void 0:t.data)!=null&&x.price?`₹${t.data.price}`:"-",Rating:((d=t==null?void 0:t.data)==null?void 0:d.rating)||"-",Quantity:((m=t==null?void 0:t.data)==null?void 0:m.quantity)||"-"};return e.jsx(e.Fragment,{children:s?e.jsx(j,{}):e.jsx("div",{className:"overflow-x-auto rounded-lg shadow-md m-4 sm:m-6",children:e.jsxs("table",{className:"min-w-full table-auto border-collapse text-left text-sm sm:text-base",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-yellow-400",children:[e.jsx("th",{className:"px-4 py-3 sm:px-10 sm:py-3 font-bold text-base sm:text-xl",children:"Attribute"}),e.jsx("th",{className:"px-4 py-3 sm:px-10 sm:py-3 font-bold text-base sm:text-xl",children:"Details"})]})}),e.jsx("tbody",{children:Object.entries(a).map(([g,f],u)=>e.jsxs("tr",{className:u%2===0?"bg-white":"bg-gray-100",children:[e.jsx("td",{className:"px-4 py-3 sm:px-6 sm:py-4 break-words max-w-xs",children:g}),e.jsx("td",{className:"px-4 py-3 sm:px-6 sm:py-4 break-words max-w-xs",children:f})]},g))})]})})})},re=()=>{const{product:t,loading:s}=l.useContext(h);return e.jsx(e.Fragment,{children:s?e.jsx(j,{}):e.jsx("div",{children:t.data.rating})})},h=l.createContext(),ce=()=>{const t=J(),a=K().id,[r,i]=l.useState("description"),{userID:c}=T(),{data:x,isLoading:d,isError:m}=Y(a),{data:g}=Z(c);return l.useEffect(()=>{window.scrollTo(0,0)},[t]),d?e.jsx("div",{className:"flex justify-center m-20",children:e.jsx(j,{size:100})}):m?e.jsx("div",{children:"Unable to fetch data."}):e.jsx(e.Fragment,{children:e.jsx(h.Provider,{value:{product:x,isLoading:d},children:e.jsx("div",{className:"overflow-x-auto m-6 bg-gray-50/50",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8 grid grid-cols-1 md:grid-rows-2 gap-8",children:[e.jsx("div",{children:e.jsx(te,{wishListItems:g})}),e.jsxs("div",{className:"w-full",children:[e.jsxs("div",{className:"flex flex-wrap justify-center gap-4 sm:gap-6 mb-6",children:[e.jsx("button",{className:`font-semibold text-base sm:text-lg text-gray-500 px-3 py-2 border-b-2 transition duration-200 ${r==="description"?"border-green-700 text-green-700":"border-transparent"}`,onClick:()=>i("description"),children:"Description"}),e.jsx("button",{className:`font-semibold text-base sm:text-lg text-gray-500 px-3 py-2 border-b-2 transition duration-200 ${r==="additional"?"border-green-700 text-green-700":"border-transparent"}`,onClick:()=>i("additional"),children:"Additional Info"}),e.jsx("button",{className:`font-semibold text-base sm:text-lg text-gray-500 px-3 py-2 border-b-2 transition duration-200 ${r==="rating"?"border-green-700 text-green-700":"border-transparent"}`,onClick:()=>i("rating"),children:"Rating"})]}),e.jsxs("div",{className:"mt-4",children:[r==="description"&&e.jsx(se,{}),r==="additional"&&e.jsx(ae,{}),r==="rating"&&e.jsx(re,{})]})]})]})})})})};export{h as ProductContext,ce as default};
